#textdomain wesnoth-Town_of_Arnsreach

[scenario]
	
	#define TOA_SCENARIO_START
		
		[event] ##########	Start, pick your starting point here	##########
			id=ToA_start
			
			##########	Trigger conditions	##########
			name=start
			
			##########	Debug setup	##########
			[set_variable]
				name=ToA.Campaign_General.Debug_On
				value=false
			[/set_variable]
			{TOA_SCENARIO_VARIABLES}
			
			##########	Starting main objective event trigger	##########
			{TOA_SCENARIO_PART_1}
			[fire_event]
				name=ToA_main_1_start
				
				## Want to debug another main objective? Change debug value, change the macro loaded, and set: ToA_main_1_start, ToA_main_2_start, ..
			[/fire_event]
			
			##########	Clean up	##########
			[remove_event]
				id=ToA_start
			[/remove_event]
		[/event]
			
	#enddef

	##########	Settle in	##########
	#define TOA_SCENARIO_PART_1
	
		[event] ##########	Main objective 1 start: Settle in	##########
			id=ToA_main_1_start
			
			##########	Trigger conditions	##########
			name=ToA_main_1_start
			
			##########	Debug setup	##########
			[if]
				[variable]
					name=ToA.Campaign_General.Debug_On
					boolean_equals=true
				[/variable]
				[then]
				[/then]
			[/if]
			
			##########	Scene setting/animate	##########	
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Main_Objective_Counter
				value=1
			[/set_variable]
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=1
			[/set_variable]
			[objectives]
				{OBJECTIVE ( _ "Settle in.") (win)}
				{DEFEAT_OBJECTIVE}
				{SECRETS_NOTE}
				[note]
					description=_"Valuables can be traded for plenty of things throughout the 
campaign, keep an eye out for secrets if you want to get it all."
				[/note]
				[note]
					description=_"Town population and prosperity will generate valuables 
and will improve the quantity and quality of militia units."
				[/note]
			[/objectives]
			[fire_event]
				name=ToA_main_1_sub_1
			[/fire_event]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_start
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 1 (main 1): Talk to Alderman Eskil	##########
			id=ToA_main_1_sub_1
			
			##########	Trigger conditions	##########
			name=ToA_main_1_sub_1
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=1
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[scroll_to]
				x,y=106,100
				immediate=yes
			[/scroll_to]
			[if]
				[variable]
					name=ToA.Campaign_General.Debug_On
					boolean_equals=false
				[/variable]
				[then]
					{MOVE_UNIT (id=villager_3) 105 100}
					{SPEAK villager_3 (_ "The timber is stacked high and the soil is fertile enough.")}
					{SPEAK villager_3 (_ "Now we need strength.")}
					{SPEAK villager_3 (_ "Arnelda is gone and I am too old...")}
					{SPEAK gar (_ "You want me to lead the fight?")}
					{SPEAK villager_3 (_ "Killing, scouting, diplomacy and more, yes. Anything that needs doing.")}
					{SPEAK gar (_ "... We need to train, and we need better wear.")}
					{SPEAK villager_3 (_ "Talk to Henry, he can probably help.")}		
					{HIGHLIGHT_IMAGE 104 96 "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/exclamation.png" ("data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/blacksmith_gear.png")}
					{SCROLL_TO 106 100}
				[/then]
			[/if]
			
			##########	Handle objectives/variables 	##########
			[objectives]
				{OBJECTIVE ( _ "Talk to Henry about getting new gear.") (win)}
				{DEFEAT_OBJECTIVE}
				{SECRETS_NOTE}
				[note]
					description=_"Valuables can be traded for plenty of things throughout the 
campaign, keep an eye out for secrets if you want to get it all."
				[/note]
				[note]
					description=_"Town population and prosperity will generate valuables 
and will improve the quantity and quality of militia units."
				[/note]
			[/objectives]
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=2
			[/set_variable]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_sub_1
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 2 (main 1): Buy gear	##########
			id=ToA_main_1_sub_2
			
			##########	Trigger conditions	##########
			name=enter hex
			first_time_only=no
			[filter]
				side=1
				[filter_location]
					x,y=104,96
					radius=1
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=2
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			{SPEAK gar (_ "Hi, I was asked to get your help wi-")}
			{SPEAK (villager_10) ("In need of some armor are ye?")}
			{SPEAK gar (_ "Yes.")}
			[message]
				speaker="villager_10"
				message= _"Will take me a while. And I'll need resources."
				[option]
					id=accept
					message=_ "Allright. <i>(Spend 100 valuables to level up loyal units.)</i>"
					[command]
						[remove_item]
							x,y=104,96
							image=data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/exclamation.png
						[/remove_item]
						[lua]
							code=<<		
								local amount=-100
								wml.variables["ToA.Town.Valuables"]=wml.variables["ToA.Town.Valuables"] + amount
								wesnoth.interface.float_label(wml.variables["unit.x"], wml.variables["unit.y"], "<span color='yellow'>".._"Gathered valuables: "..amount.."</span>")
							>>
						[/lua]
						{SPEAK (villager_10) ("Give me a month.")}
						[set_variable]
							name=ToA.Scenario_Specific.Sub_Objective_Counter
							value=3
						[/set_variable]
						[fire_event]
							name=ToA_main_1_sub_3
						[/fire_event]
						[remove_event]
							id=ToA_main_1_sub_2
						[/remove_event]
					[/command]
				[/option]
				[option]
					id=decline
					message=_ "Let me think about it."
					[command]
						{SPEAK (villager_10) ("Take yer time..")}
					[/command]
				[/option]
			[/message]
			
			##########	Handle objectives/variables 	##########

			##########	Clean up	##########
		[/event]
		
		[event] ##########	Sub objective 3 (main 1): Setup the hunt	##########
			id=ToA_main_1_sub_3
			
			##########	Trigger conditions	##########
			name=ToA_main_1_sub_3
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=3
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[lua] 
				code=<< ToA_New_Scene_Start({Fast=true}) >>
			[/lua]
			{TELEPORT_UNIT (id=sodry) 87 89}
			{TELEPORT_UNIT (id=villager_8) 93 92}
			{TELEPORT_UNIT (id=wild_mild_thing_1) 85 89}
			[modify_unit]
				[filter]
					id=sodry
				[/filter]
				side=1
			[/modify_unit]
			[modify_unit]
				[filter]
					id=gar
				[/filter]
				side=2
			[/modify_unit]
			[lua] 
				code=<< 
					ToA_New_Scene_Finish({Text="Meanwhile", Text_Size=80, Map_Location_X=87, Map_Location_Y=89, Fast=true})
				>> 
			[/lua]
			{SPEAK sodry (_ "<i>(Lines up a shot.)</i>")}
			[lua] 
				code=<< 
					wesnoth.audio.play("data/core/sounds/tusker-hit.ogg")
				>> 
			[/lua]
			{MOVE_UNIT (id=wild_mild_thing_1) 78 86}
			{MOVE_UNIT (id=wild_mild_thing_1) 73 84}
			[kill]
				id=wild_mild_thing_1
			[/kill]
			[remove_shroud]
				side=1
				x,y=78,86
				radius=1
			[/remove_shroud]
			{HIGHLIGHT_IMAGE 78 86 "items/gohere.png" ()}	
			{SCROLL_TO 87 89}
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=4
			[/set_variable]
			[objectives]
				{OBJECTIVE ( _ "Continue the hunt.") (win)}
				{DEFEAT_OBJECTIVE}
				{SECRETS_NOTE}
				[note]
					description=_"Valuables can be traded for plenty of things throughout the 
campaign, keep an eye out for secrets if you want to get it all."
				[/note]
				[note]
					description=_"Town population and prosperity will generate valuables 
and will improve the quantity and quality of militia units."
				[/note]
			[/objectives]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_sub_3
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 4 (main 1): Give up the hunt?	##########
			id=ToA_main_1_sub_4
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=78,86
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=4
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[remove_item]
				x,y=78,86
				image=items/gohere.png
			[/remove_item]
			{SPEAK sodry (_ "No tracks... Seems boars can fly now.")}
			{SPEAK sodry (_ "... Damn it.")}
			{HIGHLIGHT_IMAGE 106 97 "items/gohere.png" ()}	
			{SCROLL_TO 79 85}
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=5
			[/set_variable]
			[objectives]
				{OBJECTIVE ( _ "Give up on the hunt?") (win)}
				{DEFEAT_OBJECTIVE}
				{SECRETS_NOTE}
				[note]
					description=_"Valuables can be traded for plenty of things throughout the 
campaign, keep an eye out for secrets if you want to get it all."
				[/note]
				[note]
					description=_"Town population and prosperity will generate valuables 
and will improve the quantity and quality of militia units."
				[/note]
			[/objectives]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_sub_4
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 5_Alernative_1 (main 1): Find the snoring cave	##########
			id=ToA_main_1_sub_5_alt_1
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=81,74
					radius=1
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=5
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[remove_item]
				x,y=105,97
				image=items/gohere.png
			[/remove_item]
			{SPEAK sodry (_ "<i>(Stands there for a long moment, gazing into the abyss.)</i>")}
			{SPEAK sodry (_ "<i>(Proceeds to gather the valuables that litters the edge, moving carefully as to not wake anything that slumbers below.)</i>")}
			{MOVE_UNIT (id=sodry) 81 75}
			[lua]
				code=<<		
					local amount=8
					wml.variables["ToA.Town.Valuables"]=wml.variables["ToA.Town.Valuables"] + amount
					wesnoth.interface.float_label(wml.variables["unit.x"], wml.variables["unit.y"], "<span color='yellow'>".._"Gathered valuables: "..amount.."</span>")
				>>
			[/lua]
			[delay]
				time=500
			[/delay]
			{MOVE_UNIT (id=sodry) 82 74}
			[remove_item]
				x,y=82,74
				image=data/core/images/items/sling.png
			[/remove_item]
			[lua]
				code=<<		
					local amount=23
					wml.variables["ToA.Town.Valuables"]=wml.variables["ToA.Town.Valuables"] + amount
					wesnoth.interface.float_label(wml.variables["unit.x"], wml.variables["unit.y"], "<span color='yellow'>".._"Gathered valuables: "..amount.."</span>")
				>>
			[/lua]
			[delay]
				time=500
			[/delay]
			{MOVE_UNIT (id=sodry) 82 73}
			[lua]
				code=<<		
					local amount=15
					wml.variables["ToA.Town.Valuables"]=wml.variables["ToA.Town.Valuables"] + amount
					wesnoth.interface.float_label(wml.variables["unit.x"], wml.variables["unit.y"], "<span color='yellow'>".._"Gathered valuables: "..amount.."</span>")
				>>
			[/lua]
			[delay]
				time=500
			[/delay]
			{MOVE_UNIT (id=sodry) 81 73}
			[remove_item]
				x,y=81,73
				image=data/core/images/items/ball-blue.png~O(15%)
			[/remove_item]
			[lua]
				code=<<		
					local amount=40
					wml.variables["ToA.Town.Valuables"]=wml.variables["ToA.Town.Valuables"] + amount
					wesnoth.interface.float_label(wml.variables["unit.x"], wml.variables["unit.y"], "<span color='yellow'>".._"Gathered valuables: "..amount.."</span>")
				>>
			[/lua]
			[delay]
				time=1000
			[/delay]
			[label]
				x,y=79,72
				text= "			Resting Peak"
			[/label]
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=6
			[/set_variable]
			[set_variable]
				name=ToA.Scenario_Specific.Secrets_Counter
				add=1
			[/set_variable]
			[fire_event]
				name=ToA_main_1_sub_6
			[/fire_event]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_sub_5_alt_1,ToA_main_1_sub_5_alt_2
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 5_Alernative_2 (main 1): Return to camp	##########
			id=ToA_main_1_sub_5_alt_2
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=106,97
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=5
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[remove_item]
				x,y=106,97
				image=items/gohere.png
			[/remove_item]
			{SPEAK sodry (_ "... must have missed something.")}
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=6
			[/set_variable]
			[fire_event]
				name=ToA_main_1_sub_6
			[/fire_event]

			##########	Clean up	##########
			[remove_event]
				id=id=ToA_main_1_sub_5_alt_1,ToA_main_1_sub_5_alt_2
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 6 (main 1): Setup corpse found	##########
			id=ToA_main_1_sub_6
			
			##########	Trigger conditions	##########
			name=ToA_main_1_sub_6
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=6
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[lua] 
				code=<< ToA_New_Scene_Start({Fast=false}) >>
			[/lua]
			[modify_unit]
				[filter]
					id=sodry
				[/filter]
				side=2
			[/modify_unit]
			[modify_unit]
				[filter]
					id=merissa
				[/filter]
				side=1
			[/modify_unit]
			[modify_unit]
				[filter]
					id=mudoc
				[/filter]
				side=1
			[/modify_unit]
			[modify_side]
				side=2
				share_vision="none"
			[/modify_side]
			[remove_sound_source]
				id=woodcutting_1
			[/remove_sound_source]
			[remove_sound_source]
				id=woodcutting_2
			[/remove_sound_source]
			[remove_sound_source]
				id=woodcutting_3
			[/remove_sound_source]
			{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/dead_elf.png" 114 102}
			{TELEPORT_UNIT (id=merissa) 110 88}
			{TELEPORT_UNIT (id=mudoc) 110 87}
			{TELEPORT_UNIT (id=sodry) 117 101}
			{TELEPORT_UNIT (id=gar) 115 103}
			{TELEPORT_UNIT (id=villager_1) 116 101}
			{TELEPORT_UNIT (id=villager_2) 116 100}
			{TELEPORT_UNIT (id=villager_3) 116 102}
			{TELEPORT_UNIT (id=villager_5) 114 100}
			{TELEPORT_UNIT (id=villager_6) 104 93}
			{TELEPORT_UNIT (id=villager_7) 117 103}
			{TELEPORT_UNIT (id=villager_8) 111 98}
			{TELEPORT_UNIT (id=villager_10) 112 97}	
			{MODIFY_UNIT id=villager_3 facing sw}
			{MODIFY_UNIT id=sodry facing sw}
			{MODIFY_UNIT id=villager_1 facing sw}
			{MODIFY_UNIT id=villager_2 facing sw}
			{MODIFY_UNIT id=villager_7 facing sw}
			{MODIFY_UNIT id=gar facing sw}
			[sound_source]
				id=rain
				sounds="data/add-ons/Animated_Weather_and_Scenery/sounds/rain_medium.wav"
				loop=-1
				full_range=30
				fade_range=10
				check_fogged=false
				check_shrouded=false
				x,y=100,100
			[/sound_source]
			[AWaS_Create_Basic_Scenery]
				id=rain
				Scenery_Type=rain_medium
				[filter_location]
					x=100
					y=100
					radius=40
				[/filter_location]
			[/AWaS_Create_Basic_Scenery]
			[reset_fog]
				[filter]
					side=1
				[/filter]
				reset_view=yes
			[/reset_fog]
			[redraw]
				clear_shroud=yes
			[/redraw]
			[lua] 
				code=<< 
					ToA_New_Scene_Finish({Text="A month passes.", Text_Size=80, Map_Location_X=108, Map_Location_Y=90, Fast=false})
				>> 
			[/lua]
			{SPEAK merissa (_ "Typical that it starts raining just as we get here.")}
			{SPEAK mudoc (_ "<i>(Aims a smile at Merissa before turning to face an aproaching villager.)</i>")}
			{MODIFY_UNIT id=mudoc facing sw}
			{MOVE_UNIT (id=villager_6) 108 88}
			{SPEAK villager_6 (_ "<i>(Sweaty and exhausted.)</i> There is a corpse. I was sent... to find you. At the fishing... place.")}
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=7
			[/set_variable]
			[fire_event]
				name=ToA_main_1_sub_7
			[/fire_event]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_sub_6
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 7 (main 1): Investigate the corpse	##########
			id=ToA_main_1_sub_7
			
			##########	Trigger conditions	##########
			name=ToA_main_1_sub_7
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=7
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[lua] 
				code=<< ToA_New_Scene_Start({Fast=true}) >>
			[/lua]
			{TELEPORT_UNIT (id=merissa) 113 98}
			{TELEPORT_UNIT (id=mudoc) 114 98}
			{TELEPORT_UNIT (id=villager_6) 115 99}
			{MODIFY_UNIT id=villager_6 facing sw}
			[sound_source]
				id=crowd_excited
				sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/crowd_excited.ogg"
				loop=-1
				full_range=1
				fade_range=5
				check_fogged=false
				check_shrouded=false
				x,y=115,101
			[/sound_source]
			[reset_fog]
				[filter]
					side=1
				[/filter]
				reset_view=yes
			[/reset_fog]
			[redraw]
				clear_shroud=yes
			[/redraw]
			[lua] 
				code=<< 
					ToA_New_Scene_Finish({Text="", Text_Size=80, Map_Location_X=114, Map_Location_Y=100, Fast=true})
				>> 
			[/lua]
			{MOVE_UNIT (id=mudoc) 115 100}
			{MOVE_UNIT (id=merissa) 115 102}
			{MODIFY_UNIT id=merissa facing sw}
			{SPEAK villager_3 (_ "We found this one floting down the river. Is there anything you can find out?")}
			[remove_sound_source]
				id=crowd_excited
			[/remove_sound_source]
			{SPEAK villager_3 (_ "<i>(Turns to the crowd.)</i> Silence!")}
			{MOVE_UNIT (id=merissa) 114 102}
			{SPEAK merissa (_ "<i>Examines the corpse.</i>")}
			{MOVE_UNIT (id=merissa) 115 102}
			{SPEAK merissa (_ "An elf. Dead for less than a day. Killed by a sharp object to the back. Likely an ambush.")}
			{SPEAK merissa (_ "Residues indicates that he was traversing a swamp before he passed. No magic about him whatsoever.")}
			{SPEAK villager_3 (_ "He may have companions in need of help. Gather the scouts.")}
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=8
			[/set_variable]
			[fire_event]
				name=ToA_main_1_end
			[/fire_event]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_sub_7
			[/remove_event]
		[/event]
		
		[event] ##########	Main objective 1 end: Settle in	##########
			id=ToA_main_1_end
			
			##########	Trigger conditions	##########
			name=ToA_main_1_end
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=8
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			[lua] 
				code=<< 
					wesnoth.interface.select_unit()
					wesnoth.audio.play("data/add-ons/Town_of_Arnsreach_Resources_1/sounds/drums.wav")
					wesnoth.interface.delay(500)	
					wesnoth.interface.add_overlay_text(_"Unsunken Fallacy", {location={0,0}, duration=3000, valign="center", halign="center", size=80, color={150,150,150}, fade_time=3000})
					wesnoth.interface.delay(3000)
				>> 
			[/lua]
			
			##########	Handle objectives/variables 	##########
			{TOA_SCENARIO_PART_2}
			[fire_event]
				name=ToA_main_2_start
			[/fire_event]
			
			##########	Clean up	##########
			[remove_event]
				id=ToA_main_1_start, ToA_main_1_sub_1, ToA_main_1_sub_2, ToA_main_1_sub_3, ToA_main_1_sub_4, ToA_main_1_sub_5_alt_1, ToA_main_1_sub_5_alt_2, ToA_main_1_sub_6, ToA_main_1_sub_7, ToA_main_1_sub_8, ToA_main_1_end
			[/remove_event]
		[/event]
	#enddef
	
	##########	Find the elves	##########
	#define TOA_SCENARIO_PART_2
	
		[event] ##########	Main objective 2 start: Find the elves	##########
			id=ToA_main_2_start
			
			##########	Trigger conditions	##########
			name=ToA_main_2_start
			
			##########	Debug setup	##########
			[if]
				[variable]
					name=ToA_debug_mode_on
					boolean_equals=true
				[/variable]
				[then]
					[modify_unit]
						[filter]
							id=gar
						[/filter]
						side=2
					[/modify_unit]
					[modify_side]
						side=2
						share_vision="none"
					[/modify_side]
				[/then]
			[/if]
			
			##########	Scene setting/animate	##########
			[lua] 
				code=<< ToA_New_Scene_Start({Fast=false}) >>
			[/lua]
			{NAMED_GENERIC_UNIT 1 (rowboat) 121 104 rowboat (Rowboat)}
			[modify_unit]
				[filter]
					id=merissa
				[/filter]
				side=2
			[/modify_unit]
			[modify_unit]
				[filter]
					id=mudoc
				[/filter]
				side=2
			[/modify_unit]
			[reset_fog]
				[filter]
					side=1
				[/filter]
				reset_view=yes
			[/reset_fog]
			[redraw]
				clear_shroud=yes
			[/redraw]
			[AWaS_Delete_Basic_Scenery]
				id=rain
			[/AWaS_Delete_Basic_Scenery]
			[lua] 
				code=<< 
					ToA_New_Scene_Finish({Text="A few hours later.", Text_Size=80, Map_Location_X=122, Map_Location_Y=104, Fast=false})
				>> 
			[/lua]
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Main_Objective_Counter
				value=2
			[/set_variable]
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=1
			[/set_variable]
			[objectives]
				{OBJECTIVE ( _ "PLACEHOLDER") (win)}
				{DEFEAT_OBJECTIVE}
				{SECRETS_NOTE}
				[note]
					description=_"PLACEHOLDER"
				[/note]
				[note]
					description=_"PLACEHOLDER"
				[/note]
			[/objectives]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_start
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 1 (main 2): Spot old camp	##########
			id=ToA_main_2_sub_1
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=139,108
					radius=4
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=1
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			{MOVE_UNIT (id=rowboat) 137 106}
			[message]
				speaker="rowboat"
				message= _"I see a camp.. And the remnant of a fight.. That was easy."
				image="portraits/humans/ruffian.webp"
				caption="Murdoc: "
			[/message]
			{MOVE_UNIT (id=rowboat) 138 105}
			[lua] 
				code=<< ToA_New_Scene_Start({Fast=true}) >>
			[/lua]
			[remove_shroud]
				side=1
				x,y=138,104
				radius=3
			[/remove_shroud]
			[lift_fog]
				[filter_location]
					[filter]
						side=1
					[/filter]
					x,y=138,104
					radius=3
				[/filter_location]
			[/lift_fog]
			[lua] 
				code=<< 
					ToA_New_Scene_Finish({Text="An hour of searching and examination later.", Text_Size=80, Map_Location_X=137, Map_Location_Y=106, Fast=false})
				>> 
			[/lua]
			[redraw]
				clear_shroud=yes
			[/redraw]
			[message]
				speaker="rowboat"
				message= _"So, they where ambushed here and fled by boat further upstream."
				image="portraits/humans/swordsman-2.png"
				caption="Gar: "
			[/message]
			{MOVE_UNIT (id=rowboat) 138 106}
			{PLAYER_MOVEMENT_RESET}
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=2
			[/set_variable]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_sub_1
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 2 (main 2): Boat gets stuck	##########
			id=ToA_main_2_sub_2
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=146,111
					radius=4
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=2
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			{PLAYER_MOVEMENT_RESET}
			{PLAYER_MOVEMENT_POINTS_0}
			{MOVE_UNIT (id=rowboat) 146 111}
			[lua]
				code=<<
					wesnoth.interface.float_label(146, 111, "<span color='blue'>".._"Unit effect^Slowed".."</span>")
					wesnoth.interface.delay(2000)
				>>
			[/lua]
			[message]
				speaker="rowboat"
				message= _"We are stuck."
				image="data/add-ons/Town_of_Arnsreach_Resources_1/images/portraits/sodry.png"
				caption="Sodry: "
			[/message]
			[message]
				speaker="rowboat"
				message= _"Yes, please stick to the deep water, the reeds don't hide treasure."
				image="portraits/humans/mage-white+female.png"
				caption="Merissa: "
			[/message]
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=3
			[/set_variable]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_sub_2
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 3 (main 2): Trigger chase	##########
			id=ToA_main_2_sub_3
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=164,121
					radius=2
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=3
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			{PLAYER_FULL_RESTORE}
			{MOVE_UNIT (id=rowboat) 164 121}
			[lua] 
				code=<< 
					wesnoth.audio.play("data/add-ons/Town_of_Arnsreach_Resources_1/sounds/rumor-sound-sea-foam_92bpm.wav")
					wesnoth.interface.delay(1000)
				>> 
			[/lua]
			[message]
				speaker="rowboat"
				message= _"What was that?"
				image="portraits/humans/swordsman-2.png"
				caption="Gar: "
			[/message]
			{NAMED_GENERIC_UNIT 5 (Swamp Lizard) 164 124 swamp_lizard (Swamp Lizard)}
			{MOVE_UNIT (id=swamp_lizard) 164 123}
			[modify_unit]
				[filter]
					id=swamp_lizard
				[/filter]
				max_moves=5
				moves=5
				movement_type=float
				vision=20
				[effect]
					apply_to=remove_ability
					[experimental_filter_ability]
						id=swamp_lurk
					[/experimental_filter_ability]
				[/effect]
			[/modify_unit]
			[micro_ai]
				side=5
				ai_type=patrol
				action=add
				[filter]
					id=swamp_lizard
				[/filter]
				waypoint_x=155
				waypoint_y=104
				one_time_only=yes
				attack=rowboat
				attack_range=10
			[/micro_ai]
			[delay]
				time=1000
			[/delay]
			[message]
				speaker="rowboat"
				message= _"Row!"
				image="data/add-ons/Town_of_Arnsreach_Resources_1/images/portraits/sodry.png"
				caption="Sodry: "
			[/message]
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=4
			[/set_variable]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_sub_3
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 4 (main 2): End of chase / Spot wonder	##########
			id=ToA_main_2_sub_4
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=156,103
					radius=2
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=4
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			{PLAYER_FULL_RESTORE}
			{MOVE_UNIT (id=rowboat) 156 103}
			{MOVE_UNIT (id=swamp_lizard) 161 114}
			[kill]
				id=swamp_lizard
			[/kill]
			[message]
				speaker="rowboat"
				message= _"It turned back."
				image="data/add-ons/Town_of_Arnsreach_Resources_1/images/portraits/sodry.png"
				caption="Sodry: "
			[/message]
			[delay]
				time=1000
			[/delay]
			[message]
				speaker="rowboat"
				message= _"Something strange over there. Get us closer."
				image="portraits/humans/mage-white+female.png"
				caption="Merissa: "
			[/message]
			{MOVE_UNIT (id=rowboat) 157 102}
			[item]
				x,y=155,100
				halo=data/add-ons/Era_of_Magic_Resources/images/halo/darkness/00[01~24].png:100
			[/item]
			[remove_shroud]
				side=1
				x,y=155,100
				radius=3
			[/remove_shroud]
			[lift_fog]
				[filter_location]
					[filter]
						side=1
					[/filter]
					x,y=155,100
					radius=3
				[/filter_location]
			[/lift_fog]
			[redraw]
				clear_shroud=yes
			[/redraw]
			[scroll_to]
				x,y=156,100
				immediate=yes
			[/scroll_to]
			[delay]
				time=1000
			[/delay]
			[message]
				speaker="rowboat"
				message= _"Waow. <i>(Gawks)</i>"
				image="portraits/humans/swordsman-2.png"
				caption="Gar: "
			[/message]
			[message]
				speaker="rowboat"
				message= _"A retracted magical portal, bleeding miasma. We should nullify it."
				image="portraits/humans/mage-white+female.png"
				caption="Merissa: "
			[/message]
			[message]
				speaker="rowboat"
				message= _"Lets find the elves first."
				image="data/add-ons/Town_of_Arnsreach_Resources_1/images/portraits/sodry.png"
				caption="Sodry: "
			[/message]
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=5
			[/set_variable]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_sub_4
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 5 (main 2): Saurian encounter	##########
			id=ToA_main_2_sub_5
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=171,109
					radius=2
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=5
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			{PLAYER_FULL_RESTORE}
			[delay]
				time=1000
			[/delay]
			{NAMED_GENERIC_UNIT 6 (Saurian Skirmisher) 177 104 saurian_1 (Saurian Skirmisher)}
			[remove_shroud]
				side=1
				x,y=177,104
				radius=1
			[/remove_shroud]
			[lift_fog]
				[filter_location]
					[filter]
						side=1
					[/filter]
					x,y=177,104
					radius=1
				[/filter_location]
			[/lift_fog]
			[redraw]
				clear_shroud=yes
			[/redraw]
			[delay]
				time=2000
			[/delay]
			{MOVE_UNIT (id=saurian_1) 180 98}
			[kill]
				id=saurian_1
			[/kill]
			[message]
				speaker="rowboat"
				message= _"Looks like we are intruding on lizard land. Going to be nothing but ambushes from here on out."
				image="portraits/humans/ruffian.webp"
				caption="Murdoc: "
			[/message]
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=6
			[/set_variable]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_sub_5
			[/remove_event]
		[/event]
		
		[event] ##########	Sub objective 6 (main 2): Spot elven boat	##########
			id=ToA_main_2_sub_6
			
			##########	Trigger conditions	##########
			name=enter hex
			[filter]
				side=1
				[filter_location]
					x,y=188,125
					radius=2
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=6
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			{PLAYER_FULL_RESTORE}
			[message]
				speaker="rowboat"
				message= _"There!"
				image="data/add-ons/Town_of_Arnsreach_Resources_1/images/portraits/sodry.png"
				caption="Sodry: "
			[/message]
			[remove_shroud]
				side=1
				x,y=189,128
				radius=1
			[/remove_shroud]
			[lift_fog]
				[filter_location]
					[filter]
						side=1
					[/filter]
					x,y=189,128
					radius=1
				[/filter_location]
			[/lift_fog]
			[redraw]
				clear_shroud=yes
			[/redraw]
			[scroll_to]
				x,y=189,128
			[/scroll_to]
			{MOVE_UNIT (id=rowboat) 188 128}
			[message]
				speaker="rowboat"
				message= _"A boat.. must belong to our elven friends. Who are hiding in the reeds. Perchance."
				image="portraits/humans/ruffian.webp"
				caption="Murdoc: "
			[/message]
			[lua] 
				code=<< ToA_New_Scene_Start({Fast=true}) >>
			[/lua]
			{TELEPORT_UNIT (id=sodry) 193 129}
			{TELEPORT_UNIT (id=merissa) 193 129}
			{TELEPORT_UNIT (id=gar) 193 129}
			{TELEPORT_UNIT (id=mudoc) 193 129}
			[kill]
				id=rowboat
			[/kill]
			[modify_unit]
				[filter]
					id=sodry, merissa, gar, mudoc
				[/filter]
				side=1
			[/modify_unit]
			[lua] 
				code=<< 
					ToA_New_Scene_Finish({Text="", Text_Size=80, Map_Location_X=193, Map_Location_Y=129, Fast=true})
				>> 
			[/lua]
			
			##########	Handle objectives/variables 	##########
			[set_variable]
				name=ToA.Scenario_Specific.Sub_Objective_Counter
				value=7
			[/set_variable]

			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_sub_2
			[/remove_event]
		[/event]
			
		[event] ##########	Main objective 2 end: Find the elves	##########
			id=ToA_main_2_end
			
			##########	Trigger conditions	##########
			name=ToA_main_2_end
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=1
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_equals=3
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Scene setting/animate	##########
			
			##########	Handle objectives/variables 	##########
			{TOA_SCENARIO_PART_3}
			[fire_event]
				name=ToA_main_3_start
			[/fire_event]
			
			##########	Clean up	##########
			[remove_event]
				id=ToA_main_2_start, ToA_main_2_sub_1, ToA_main_2_sub_2, ToA_main_2_end
			[/remove_event]
		[/event]
	#enddef
	
	##########	PLACEHOLDER	##########
	#define TOA_SCENARIO_PART_3
	
	#enddef
		
	#define TOA_SCENARIO_SECRETS
			
		[event] ##########	Secret stash 1	##########
			id=ToA_secret_stash_1
			
			##########	Trigger conditions	##########
			name=enter_hex
			[filter]
				side=1
				[filter_location]
					x,y=159,131
					radius=2
				[/filter_location]
			[/filter]
			
			##########	Mechanics	##########
			{PLAYER_MOVEMENT_RESET}
			[message]
				speaker="rowboat"
				message= _"What do I see.. Amidst the reeds.. Could it be.."
				image="portraits/humans/ruffian.webp"
				caption="Murdoc: "
			[/message]
			{MOVE_UNIT (id=rowboat) 158 130}
			[lua]
				code=<<		
					local amount=60
					wml.variables["ToA.Town.Valuables"]=wml.variables["ToA.Town.Valuables"] + amount
					wesnoth.interface.float_label(158, 130, "<span color='yellow'>".._"Gathered valuables: "..amount.."</span>")
					wesnoth.interface.delay(500)
				>>
			[/lua]
			[message]
				speaker="rowboat"
				message= _"Oh, eat shit."
				image="portraits/humans/mage-white+female.png"
				caption="Merissa: "
			[/message]
			[message]
				speaker="rowboat"
				message= _"<i>(Adopts a shit-eating grin that stays up for hours.)</i>"
				image="portraits/humans/ruffian.webp"
				caption="Murdoc: "
			[/message]
			[remove_item]
				x,y=78,89
				image=data/core/images/items/ring-red.png
			[/remove_item]
			[set_variable]
				name=ToA.Scenario_Specific.Secrets_Counter
				add=1
			[/set_variable]
		[/event]
	#enddef
	
	#define TOA_SCENARIO_TOWN_MECHANICS
		[lua]
			code=<<		
				ToA_Update_Town_Over_Years(0.25)
			>>
		[/lua]
	#enddef
	
	#define TOA_SCENARIO_SCENERY

		##########	Images Secrets	##########
		{PLACE_IMAGE "data/core/images/items/bones.png" 82 73}
		{PLACE_IMAGE "data/core/images/items/sling.png" 82 74}
		{PLACE_IMAGE "data/core/images/items/ball-blue.png~O(15%)" 81 73}
		
		##########	Images Terrain	##########
		[item]
			x,y=78,83
			halo=data/add-ons/Town_of_Arnsreach_Resources_1/images/terrain/animations/waterfall/s/00[01~40].png:40
		[/item]
		[item]
			x,y=80,77
			halo=data/add-ons/Town_of_Arnsreach_Resources_1/images/terrain/animations/waterfall/s/00[01~40].png~FL(horiz):40
		[/item]
		[item]
			x,y=81,73
			halo=data/add-ons/Town_of_Arnsreach_Resources_1/images/terrain/animations/waterfall/s/00[01~40].png~SCALE(130,370):40
		[/item]
		[item]
			x,y=81,74
			halo=data/add-ons/Animated_Weather_and_Scenery/images/weather/mist_light/00[01~20].png:200
		[/item]

		##########	Images Town	##########
		{PLACE_IMAGE "data/core/images/terrain/village/camp.png" 105 99}
		{PLACE_IMAGE "data/core/images/terrain/village/camp2.png" 104 99}
		{PLACE_IMAGE "data/core/images/terrain/village/camp.png" 103 99}
		{PLACE_IMAGE "data/core/images/terrain/village/camp3.png" 107 96}
		{PLACE_IMAGE "data/core/images/terrain/village/camp3.png" 108 99}
		{PLACE_IMAGE "data/core/images/terrain/village/camp.png" 107 100}
		{PLACE_IMAGE "data/core/images/items/barrel.png" 107 101}
		{PLACE_IMAGE "data/core/images/scenery/leanto.png" 107 101}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/box.png" 107 95}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/barrel_stack.png" 108 95}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_1.png~FL(horiz)" 78 101}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_2.png" 106 89}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_3.png~FL(horiz)" 116 100}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_3.png~FL(horiz)" 112 97}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_2.png" 109 95}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_1.png~FL(horiz)" 110 95}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_3.png" 111 96}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_2.png~FL(horiz)" 111 97}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_2.png~FL(horiz)" 104 95}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_3.png~FL(horiz)" 103 96}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_3.png" 102 96}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_1.png" 102 97}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_2.png~FL(horiz)" 103 98}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/tree_stumps_1.png" 101 98}
		{PLACE_IMAGE "data/core/images/terrain/village/camp2.png~FL(horiz)" 108 98}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/log_pile.png~FL(horiz)" 109 97}	
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/log_pile.png~FL(horiz)" 104 98}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/log_pile.png" 101 98}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/log_pile.png" 110 96}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/blacksmith_gear.png" 104 96}
		{PLACE_IMAGE "data/core/images/scenery/rock3.png" 111 97}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/clay_pit.png" 110 99}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/clay_tiles.png" 110 98}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/fishing_gear.png" 116 102}
		{PLACE_IMAGE "data/add-ons/Town_of_Arnsreach_Resources_1/images/single_tile_items/hunting_gear.png" 96 89}
		{PLACE_IMAGE "data/core/images/terrain/village/camp2.png~FL(horiz)" 97 88}
		
		##########	Custom Terrain	##########
		[terrain_graphics]
			x,y=75,94
			[image]
				layer=0
				center=90,95
				name=landmarks/Stone_pillar_circle.png
			[/image]
			map="
				*,*
				,*
				*,*
				,*"
		[/terrain_graphics]
		[terrain_graphics]
			x,y=121, 105
			[image]
				layer=0
				center=120,180
				name=landmarks/Jagged_coast.png~SCALE(250,250)
			[/image]
			map="
				*,*,*
				,*,*
				*,*,*
				,*,*
				*,*,*
				,*,*"
		[/terrain_graphics]
		[terrain_graphics]
			x,y=96, 95
			[image]
				layer=0
				center=90,145
				name=landmarks/water_hole.png
			[/image]
			map="
				*,*,*
				,*,*
				*,*,*
				,*,*
				*,*,*
				,*,*"
		[/terrain_graphics]
		[terrain_graphics]
			x,y=92, 111
			[image]
				layer=0
				center=85,85
				name=landmarks/aincent_stone_gate.png
			[/image]
			map="
				*,*
				,*
				*,*
				,*"
		[/terrain_graphics]

		##########	Sounds	##########
		[sound_source]
			id=cave_snoring
			sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/cave_snoring.ogg"
			loop=-1
			full_range=1
			fade_range=8
			chance=100
			delay=0
			check_fogged=false
			check_shrouded=false
			x,y=81,74
		[/sound_source]
		[sound_source]
			id=waterfall_1
			sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/waterfall.ogg"
			loop=-1
			full_range=1
			fade_range=5
			chance=100
			delay=0
			check_fogged=true
			check_shrouded=true
			x,y=78,83
		[/sound_source]
		[sound_source]
			id=waterfall_2
			sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/waterfall.ogg"
			loop=-1
			full_range=1
			fade_range=5
			chance=100
			delay=0
			check_fogged=true
			check_shrouded=true
			x,y=80,77
		[/sound_source]
		[sound_source]
			id=waterfall_3
			sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/waterfall.ogg"
			loop=-1
			full_range=1
			fade_range=5
			chance=100
			delay=0
			check_fogged=true
			check_shrouded=true
			x,y=81,74
		[/sound_source]
		[sound_source]
			id=woodcutting_1
			sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/chopping-a-tree-with-hatchet-in-a-forest-close-up-68478.ogg"
			loop=-1
			full_range=1
			fade_range=5
			chance=100
			delay=400
			check_fogged=true
			check_shrouded=true
			x,y=103,100
		[/sound_source]
		[sound_source]
			id=woodcutting_2
			sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/chopping-a-tree-with-hatchet-in-a-forest-close-up-68478.ogg"
			loop=-1
			full_range=1
			fade_range=5
			chance=100
			delay=900
			check_fogged=true
			check_shrouded=true
			x,y=101,97
		[/sound_source]
		[sound_source]
			id=woodcutting_3
			sounds="data/add-ons/Town_of_Arnsreach_Resources_1/sounds/chopping-a-tree-with-hatchet-in-a-forest-close-up-68478.ogg"
			loop=-1
			full_range=1
			fade_range=5
			chance=100
			delay=0
			check_fogged=true
			check_shrouded=true
			x,y=101,96
		[/sound_source]
		

	#enddef
	
	#define TOA_SCENARIO_UNITS
		
		[event]
			id=ToA_prestart_units
			
			##########	Trigger conditions	##########
			name=prestart
			
				########## Player ##########
				[unit]
					{CHARACTER_STATS_GAR}
					facing="sw"
					side=1
					x,y=106,100
				[/unit]
				{CHARACTER_UPGRADE_GAR}
				[unit]
					{CHARACTER_STATS_MUDOC}
					facing="sw"
					side=2
					x,y=112,97
				[/unit]
				{CHARACTER_UPGRADE_MUDOC}
				[unit]
					{CHARACTER_STATS_MERISSA}
					facing="nw"
					side=2
					x,y=106,88
				[/unit]
				{CHARACTER_UPGRADE_MERISSA}
				[unit]
					{CHARACTER_STATS_SODRY}
					facing="sw"
					side=2
					x,y=96,86
				[/unit]
				{CHARACTER_UPGRADE_SODRY}
				
				########## Town	##########
				{NAMED_GENERIC_UNIT 2 (Peasant Workers) 110 97 villager_1 (Villagers)}
				{NAMED_GENERIC_UNIT 2 (Peasant Workers) 102 98 villager_2 (Villagers)}
				{NAMED_GENERIC_UNIT 2 (Alderman Eskil) 104 98 villager_3 (Alderman Eskil)}
				{NAMED_GENERIC_UNIT 2 (Peasant Axe) 103 100 villager_4 (Villager)}
				{NAMED_GENERIC_UNIT 2 (Peasant Unarmed 1) 108 96 villager_5 (Villager)}
				{NAMED_GENERIC_UNIT 2 (Peasant) 109 88 villager_6 (Villager)}
				{NAMED_GENERIC_UNIT 2 (Peasant Lantern) 117 103 villager_7 (Villager)}
				{NAMED_GENERIC_UNIT 2 (Woodsman) 95 88 villager_8 (Villager)}
				{NAMED_GENERIC_UNIT 2 (Peasant Axe) 101 96 villager_9 (Villager)}
				{NAMED_GENERIC_UNIT 2 (Henry) 104 96 villager_10 (Henry)}
				{NAMED_GENERIC_UNIT 2 (Peasant Axe) 101 97 villager_11 (Villager)}
				
				########## Wild Mild Things	##########
				{NAMED_GENERIC_UNIT 4 (Woodland Boar) 91 88 wild_mild_thing_1 (Woodland Boar)}
				
				########## Wild Agressive Things	##########
				{NAMED_GENERIC_UNIT 5 (Sea Serpent) 186 115 clay_serpant (Clay Serpant)}
				[modify_unit]
					[filter]
						id=clay_serpant
					[/filter]
					max_moves=0
					moves=0
				[/modify_unit]
				
				##Adjust unit facing
				{MODIFY_UNIT id=villager_10 facing se}
			
			##########	Clean up	##########
			[remove_event]
				id=ToA_prestart_units
			[/remove_event]
		[/event]
	
	#enddef
	
	#define TOA_SCENARIO_MAP_DATA
		
		[event]
			id=ToA_prestart_map_data
			
			##########	Trigger conditions	##########
			name=prestart
			
			##########	Labels	##########
			[label]
				x,y=75,93
				text= "			Islet of Gaze"
			[/label]
			[label]
			x,y=93,110
			text= _ "
Mire Foothold"
			[/label]
			[label]
				x,y=122,104
				text= _ "
Spiked Cross"
			[/label]
			[label]
				x,y=97,95
				text= _ "Promised Spring"
			[/label]
			[label]
				x,y=111,96
				text= _ "Arnsreach"
			[/label]
			
		
			##########	Fog removal	##########
			[modify_side]
				side=1
				shroud_data="|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111000000000011
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111110000000111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111110001111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111011111111111111110011111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111110011111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111011111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000001101111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000001111111101111111111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000001111100000111111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000111100000001111111111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000011100000000011111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000001100000000001111111111111111111111111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111111111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111
					|0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111
					|000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011111
					|00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111
					"
			[/modify_side]
			
			##########	Clean up	##########
			[remove_event]
				id=ToA_prestart_map_data
			[/remove_event]
		[/event]
	#enddef
	
	#define TOA_SCENARIO_MECHANICS
		
		[event] ##########	On load game	##########
			first_time_only=no
			name=preload
			[lua]
				code=<<
					wesnoth.dofile '~add-ons/Town_of_Arnsreach/utils/ui.lua'
				>>
			[/lua]
		[/event]
		
		[event] ##########	Valuables on enemy death	##########
			id=ToA.Town.Valuables_on_enemy_death
			
			##########	Trigger conditions	##########
			first_time_only=no
			name=die
			[filter]
				side=3,4,6
			[/filter]
			
			##########	Mechanics	##########
			[lua]
				code=<<		
					local amount=(wml.variables["unit.level"]+1)*10
					wml.variables["ToA.Town.Valuables"]=wml.variables["ToA.Town.Valuables"] + amount
					wesnoth.interface.float_label(wml.variables["unit.x"], wml.variables["unit.y"], "<span color='yellow'>".._"Gathered valuables: "..amount.."</span>")
				>>
			[/lua]
		[/event]
		
		[event] ##########	Rowboat slowed	##########
			id=ToA_rowboat_slow
			
			##########	Trigger conditions	##########
			first_time_only=no
			name=enter hex
			[filter]
				side=1
				[filter_location]
					terrain=!,Wo,Wog
				[/filter_location]
			[/filter]
			[filter_condition]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_not_equals=1
					[/variable]
				[/and]
				[and]
					[variable]
						name=ToA.Scenario_Specific.Sub_Objective_Counter
						numerical_not_equals=2
					[/variable]
				[/and]
			[/filter_condition]
			
			##########	Mechanics	##########
			[lua]
				code=<<		
					if mathx.random()>0.3 then
						local x = wesnoth.current.event_context.x1
						local y = wesnoth.current.event_context.y1
						local unit=wesnoth.units.get(x, y)
						if unit then
							wesnoth.interface.float_label(unit.x, unit.y, "<span color='blue'>".._"Unit effect^Slowed".."</span>")
							unit.moves=math.max(0, unit.moves-3)
						end
					end
				>>
			[/lua]


		[/event]
	#enddef
	
	#define TOA_SCENARIO_WEATHER_SYSTEM
		[event]
			name=new turn
			id=update_weather
			first_time_only=no
			[if]
				[variable]
					name=ToA.Scenario_Specific.Main_Objective_Counter
					numerical_equals=2
				[/variable]
				[or]
					[variable]
						name=ToA.Scenario_Specific.Main_Objective_Counter
						numerical_equals=3
					[/variable]
					[or]
						[variable]
							name=ToA.Scenario_Specific.Main_Objective_Counter
							numerical_equals=4
						[/variable]
					[/or]
				[/or]
				[then]
					[lua]
						code=<<		
							--change will be a slightly negative number and bellcurve distrobution
							wml.variables["ToA.Scenario_Specific.Weather_Change"]=false
							local old_value=wml.variables["ToA.Scenario_Specific.Weather_Level"]
							local count=math.floor((mathx.random()+mathx.random()-1)*2.99+0.2)
							count = math.max(0, (old_value + count))
							count = math.min(4, count)
							wml.variables["ToA.Scenario_Specific.Weather_Level"]=count
							if old_value~=wml.variables["ToA.Scenario_Specific.Weather_Level"] then
								wml.variables["ToA.Scenario_Specific.Weather_Change"]=true
							end
						>>
					[/lua]
					[if]
						[variable]
							name=ToA.Scenario_Specific.Weather_Change
							boolean_equals=true
						[/variable]
						[then]
							[AWaS_Delete_Basic_Scenery]
								id=rain
							[/AWaS_Delete_Basic_Scenery]
							[AWaS_Delete_MovementTriggered_Scenery]
								id=thunder
							[/AWaS_Delete_MovementTriggered_Scenery]
							[remove_sound_source]
								id=rain
							[/remove_sound_source]
							[if]
								[variable]
									name=ToA.Scenario_Specific.Weather_Level
									numerical_equals=2
								[/variable]
								[then]
									[AWaS_Create_Basic_Scenery]
										id=rain
										Scenery_Type=rain_light
										[filter_location]
											x=150
											y=100
											radius=40
										[/filter_location]
									[/AWaS_Create_Basic_Scenery]
									[sound_source]
										id=rain
										sounds="data/add-ons/Animated_Weather_and_Scenery/sounds/rain_light.wav"
										loop=-1
										full_range=30
										fade_range=10
										check_fogged=false
										check_shrouded=false
										x,y=150,100
									[/sound_source]
								[/then]
								[elseif]
									[variable]
										name=ToA.Scenario_Specific.Weather_Level
										numerical_equals=3
									[/variable]
									[then]
										[AWaS_Create_Basic_Scenery]
											id=rain
											Scenery_Type=rain_medium
											[filter_location]
												x=150
												y=100
												radius=40
											[/filter_location]
										[/AWaS_Create_Basic_Scenery]
										[sound_source]
											id=rain
											sounds="data/add-ons/Animated_Weather_and_Scenery/sounds/rain_medium.wav"
											loop=-1
											full_range=30
											fade_range=10
											check_fogged=false
											check_shrouded=false
											x,y=150,100
										[/sound_source]
										[AWaS_Create_MovementTriggered_Scenery]
											id=thunder
											Scenery_Type=thunder
											[filter_location]
												x=150
												y=100
												radius=40
											[/filter_location]
											[filter_location_Trigger_Area]
												x=150
												y=100
												radius=40
											[/filter_location_Trigger_Area]
										[/AWaS_Create_MovementTriggered_Scenery]
									[/then]
								[/elseif]
								[elseif]
									[variable]
										name=ToA.Scenario_Specific.Weather_Level
										numerical_equals=4
									[/variable]
									[then]
										[AWaS_Create_Basic_Scenery]
											id=rain
											Scenery_Type=rain_heavy
											[filter_location]
												x=150
												y=100
												radius=40
											[/filter_location]
										[/AWaS_Create_Basic_Scenery]
										[sound_source]
											id=rain
											sounds="data/add-ons/Animated_Weather_and_Scenery/sounds/rain_heavy.wav"
											loop=-1
											full_range=30
											fade_range=10
											check_fogged=false
											check_shrouded=false
											x,y=150,100
										[/sound_source]
										[AWaS_Create_MovementTriggered_Scenery]
											id=thunder
											Scenery_Type=thunder
											[filter_location]
												x=150
												y=100
												radius=40
											[/filter_location]
											[filter_location_Trigger_Area]
												x=150
												y=100
												radius=40
											[/filter_location_Trigger_Area]
										[/AWaS_Create_MovementTriggered_Scenery]
									[/then]
								[/elseif]
							[/if]
						[/then]
					[/if]
				[/then]
			[/if]
				
			##########	Clean up	##########					
		[/event]
	#enddef
	
	#define TOA_SCENARIO_ACHIEVMENTS
		
	#enddef
	
	#define TOA_SCENARIO_SIDES
		
		[side] ##########	Setup player side	##########
			controller="human"
			fog=yes
			#fog=no
			shroud=yes
			#shroud=no
			gold=0
			hidden=no
			income=0
			no_leader=yes
			defeat_condition=never
			share_vision="none"
			side=1
			side_name=_"Scouts"
			team_name=player_alliance
		[/side]
		
		[side] ##########	Setup Townspeople side	##########
			controller="null"
			fog=yes
			gold=0
			hidden=no
			income=0
			no_leader=yes
			share_vision="all"
			shroud=yes
			side=2
			side_name="Townspeople"
			team_name=player_alliance
			[ai]
				ai_algorithm=idle_ai
			[/ai]
		[/side]
		
		[side] ##########	Walking Corpse	##########
			controller="ai"
			fog=yes
			gold=0
			hidden=no
			income=0
			no_leader=yes
			share_vision="none"
			shroud=yes
			side=3
			team_name=player_alliance
			side_name=_"Walking Corpse"
			[ai]
				[goal]
					name=target
					[criteria]
						id="gar"
					[/criteria]
					value=1
				[/goal]
			[/ai]
		[/side]
		
		[side] ##########	Setup Wild Mild Things side	##########
			controller="ai"
			fog=no
			gold=0
			hidden=no
			income=0
			no_leader=yes
			share_vision="none"
			shroud=no
			side=4
			team_name=wilderness_alliance, player_alliance,
			side_name=_"Wild Mild Things"
		[/side]
		
		[side] ##########	Setup Wild Aggressive Things side	##########
			controller="ai"
			fog=yes
			gold=0
			hidden=no
			income=0
			no_leader=yes
			share_vision="all"
			shroud=yes
			side=5
			team_name=wilderness_alliance
			side_name=_"Wild Agressive Things"
		[/side]
		
		[side] ##########	Setup Saurians side	##########
			controller="ai"
			fog=yes
			gold=0
			hidden=no
			income=0
			no_leader=yes
			share_vision="all"
			shroud=yes
			side=6
			team_name=saurians_alliance
			side_name=_"Saurians"
		[/side]
		
	#enddef
	
	#define TOA_SCENARIO_INITIALIZE
		
		##########	Scenario setup	##########
		victory_when_enemies_defeated=no
		id="Arnsreach_Scenario_2"
		map_file="Arnsreach_Scenario_2.map"
		name=_"Unsunken Fallacy"
		random_start_time=no
		turns=-1
		{DEFAULT_MUSIC_PLAYLIST}
		
		##########	Activate code	##########
		{TOA_REAL_RANGED_ATTACKS}
		{TOA_SCENARIO_SIDES}
		{TOA_SCENARIO_UNITS}
		{TOA_TAUNTED_AI (1,2,3,4,5)}
		{TOA_DISABLE_XP}
		{TOA_WALKING_CORPSE_SETUP}
		{TOA_WALKING_CORPSE_TELEPORT}
		{TOA_ZOMBIE_SOUNDS}
		{TOA_DISABLE_VILLAGE_CAPTURE}
		{TOA_SCENARIO_MECHANICS}
		{TOA_SCENARIO_SCENERY}
		{TOA_SCENARIO_MAP_DATA}
		{TOA_SCENARIO_SECRETS}
		{TOA_SCENARIO_TOWN_MECHANICS}
		{TOA_SCENARIO_ACHIEVMENTS}
		{TOA_SCENARIO_WEATHER_SYSTEM}
		{TOA_SCENARIO_START}
		
		##########	Day cycle	##########
		{DAWN}
		{MORNING}
		{MIDDAY}
		{AFTERNOON}
		{DUSK}
		{FIRST_WATCH}
		{MIDNIGHT}
		{SECOND_WATCH}
		
		##########	Defeat events	##########
		{DEATH_DEFEAT_SOMEONE gar ("I... will... kill... you.")}
		{DEATH_DEFEAT_SOMEONE mudoc ("I am sorry...")}
		{DEATH_DEFEAT_SOMEONE merissa ("Help... me...")}
		{DEATH_DEFEAT_SOMEONE sodry ("Fuck.")}
	#enddef
	
	#define TOA_SCENARIO_VARIABLES
		[set_variable]
			name=ToA.Scenario_Specific.Secrets_Counter
			value=0
		[/set_variable]
		[set_variable]
			name=ToA.Scenario_Specific.Secrets_Counter_Max
			value=6
		[/set_variable]
		[set_variable]
			name=ToA.Scenario_Specific.Weather_Level
			value=1
		[/set_variable]
		[set_variable]
			name=ToA.Scenario_Specific.Weather_Change
			value=false
		[/set_variable]
		
		##########	Debug	##########
		[if]
			[variable]
				name=ToA.Campaign_General.Debug_On
				boolean_equals=true
			[/variable]
			[then]
				[set_variable]
					name=ToA.Town.Valuables
					value=100
				[/set_variable]
				[set_variable]
					name=ToA.Town.Prosperity
					value=100
				[/set_variable]
				[set_variable]
					name=ToA.Town.Population
					value=100
				[/set_variable]
				[set_variable]
					name=ToA.Scenario_Specific.Secrets_Counter
					value=0
				[/set_variable]
				[set_variable]
					name=ToA.Scenario_Specific.Secrets_Counter_Max
					value=6
				[/set_variable]
				[set_variable]
					name=ToA.Characters.Gar.Sword
					value=true
				[/set_variable]
			[/then]
			[elseif]
				[variable]
					name=ToA.Town.Valuables
					equals=$empty
				[/variable]
				[then]
					[set_variable]
					name=ToA.Town.Valuables
					value=100
				[/set_variable]
				[set_variable]
					name=ToA.Town.Prosperity
					value=100
				[/set_variable]
				[set_variable]
					name=ToA.Town.Population
					value=100
				[/set_variable]
				[set_variable]
					name=ToA.Scenario_Specific.Secrets_Counter
					value=0
				[/set_variable]
				[set_variable]
					name=ToA.Scenario_Specific.Secrets_Counter_Max
					value=6
				[/set_variable]
				[set_variable]
					name=ToA.Characters.Gar.Sword
					value=true
				[/set_variable]
				[/then]
			[/elseif]
		[/if]

	#enddef
	
	{TOA_SCENARIO_INITIALIZE}	

[/scenario]
